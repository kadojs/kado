{{>header}}
    <div class="container-fluid">
      <h1>{{_l.update}} {{_l.doc.doc}}</h1>
      <form class="form form-horizontal" action="{{{_baseUrl}}}{{{_u._doc_save}}}" method="post" role="form">
        <input type="hidden" name="id" value="{{item.id}}" />
        <input type="hidden" name="DocProjectVersionId" value="{{item.DocProjectVersionId}}" />
        <input type="hidden" id="docContentInput" name="content" />
        <input type="hidden" id="docHtmlInput" name="html" />
        <div class="form-group">
          <label for="title">{{_l.doc.title}}</label>
          <input class="form-control" type="text" data-uri="uri" id="title" name="title" placeholder="{{_l.doc.title}}" value="{{item.title}}" />
        </div>
        <div class="form-group">
          <label for="title">{{_l.doc.uri}}</label>
          <input class="form-control" type="text" id="uri" name="uri" placeholder="{{_l.doc.uri}}" value="{{item.uri}}" />
        </div>
        <div class="form-group">
          <label for="title">{{_l.doc.sort_num}}</label>
          <input class="form-control" type="text" id="sortNum" name="sortNum" placeholder="Order of Doc in Table of Contents" value="{{item.sortNum}}" />
        </div>
        <div class="form-group">
          <label for="docContent">{{_l.doc.content}}</label>
          <div id="docContent"></div>
        </div>
        <div class="form-group">
          <button class="btn btn-success" id="docSave" type="submit">{{_l.save}}</button>
        </div>
      </form>
      <script type="text/javascript">
        $(document).ready(() => {
          let editor = new TuiEditor({
            el: document.querySelector('#docContent'),
            initialEditType: 'markdown',
            previewStyle: 'vertical',
            height: '400px',
            codeBlockLanguages: ['ruby', 'PHP', 'javascript'],
            initialValue: new TextDecoder().decode(base64js.toByteArray('{{{item.content}}}')),
            events: {
              change: () => {
                $('#docContentInput').val(editor.getMarkdown())
                $('#docHtmlInput').val(editor.getHtml())
              }
            }
          })
        })
      </script>
    </div>
{{>footer}}
